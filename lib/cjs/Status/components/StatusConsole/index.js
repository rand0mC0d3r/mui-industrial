"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),react_dom_1=require("react-dom"),index_types_1=require("../../../index.types"),Store_1=__importDefault(require("../../../Store")),StatusCore_1=__importDefault(require("../StatusCore"));exports.default=function(e){var t=e.id,n=e.order,i=e.disabled,r=e.options,o=e.secondary,u=e.tooltip,s=e.onClick,a=e.onContextMenu,_=e.style,d=e.className,l=e.children,c=(0,react_1.useContext)(Store_1.default),p=c.status,f=c.updateConsoleActiveId,x=(0,react_1.useContext)(Store_1.default).handleStatusTypeUpdate,y=(0,react_1.useContext)(Store_1.default).settings,h=y.consoleActiveId,m=y.isConsoleOpen,g=(0,react_1.useState)(void 0),v=g[0],C=g[1],S=(0,react_1.useState)(null),j=S[0],q=S[1],I=v&&m&&(null==v?void 0:v.uniqueId)===h?index_types_1.Highlight.PRIMARY:index_types_1.Highlight.DEFAULT;return(0,react_1.useEffect)(function(){q(document.getElementById(index_types_1.domConsoleId)||null)},[v,h,m]),(0,react_1.useEffect)(function(){C(p.find(function(e){return e.uniqueId===t}))},[p,t]),(0,react_1.useEffect)(function(){v&&v.type!==index_types_1.StatusType.CONSOLE&&x({id:t,type:index_types_1.StatusType.CONSOLE})},[v,t,x]),(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsx)(StatusCore_1.default,__assign({},{id:t,order:n,tooltip:u,secondary:o,disabled:i,options:r,highlight:I,onClick:function(e){s&&s(e),v&&f(m&&h===t?{id:void 0}:{id:null==v?void 0:v.uniqueId})},onContextMenu:a,style:_,className:d},{children:l})),j&&(null==r?void 0:r.content)&&(null==v?void 0:v.uniqueId)===h&&(0,react_dom_1.createPortal)(null==r?void 0:r.content,j)]})};