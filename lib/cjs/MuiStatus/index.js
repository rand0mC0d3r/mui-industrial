"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},__createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0});var jsx_runtime_1=require("react/jsx-runtime"),material_1=require("@mui/material"),styles_1=require("@mui/material/styles"),react_1=require("react"),react_dom_1=require("react-dom"),MuiStore_1=__importStar(require("../MuiStore")),componentId="statusBar",backgroundColor=function(e,t){switch(t){case"primary":return e.palette.primary.main;case"secondary":return e.palette.secondary.main;default:return""}},backgroundColorHover=function(e,t){switch(t){case"primary":return e.palette.primary.dark;case"secondary":return e.palette.secondary.dark;default:return e.palette.divider}},SSpan=(0,styles_1.styled)("span")(function(e){var t=e.theme;return{padding:"4px 8px",display:"flex",flexWrap:"nowrap",alignItems:"center",fontSize:"14px",gap:"".concat(t.spacing(.5)),"& > *":{fontSize:"14px !important"}}}),SDiv=(0,styles_1.styled)("div")(function(e){var t=e.theme,r=e.hasclick,n=e.highlight,i=e.isdisabled;return{WebkitFontSmoothing:"auto",height:"100%",display:"flex",flex:"0 0 auto",alignItems:"center",gap:"16px",justifyContent:"center",alignSelf:"center",position:"relative",cursor:"true"===r&&"false"===i?"pointer":"",backgroundColor:backgroundColor(t,n),color:t.palette.text.primary,"& > div > *":{color:"default"!==n?"".concat(t.palette.background.default," !important"):""},"& > span > div > *":{color:"default"!==n?"".concat(t.palette.background.default," !important"):""},"&:hover":"true"===r&&"false"===i?{backgroundColor:backgroundColorHover(t,n),color:"".concat(t.palette.text.primary)}:{}}});function default_1(e){var t=e.id,r=e.secondary,n=void 0!==r&&r,i=e.style,a=e.onClick,o=e.onContextMenu,u=e.disabled,l=void 0!==u&&u,c=e.highlight,s=void 0===c?"default":c,d=e.tooltip,f=e.children,_=(0,react_1.useContext)(MuiStore_1.default),p=_.status,m=_.handleStatusUpdate,g=_.handleStatusAnnouncement,h=_.handleStatusDestroy,y=(0,react_1.useContext)(MuiStore_1.default).settings.allowRightClick,v=(0,react_1.useState)(),b=v[0],x=v[1],S=(0,react_1.useState)(null),j=S[0],k=S[1],C=(0,react_1.useState)(null),M=C[0],w=C[1],O=(0,react_1.useCallback)(function(){return g({id:t,ownId:b,secondary:n,children:f})},[t,n,b,f,g]),I=(0,react_1.useCallback)(function(){h({id:t})},[t]);return(0,react_1.useEffect)(function(){b&&null!==j&&m({id:t,ownId:b,children:f})},[t,b,j,f]),(0,react_1.useEffect)(function(){t&&b&&null===j&&!p.some(function(e){return e.uniqueId===t})&&O()},[t,b,j,p,O]),(0,react_1.useEffect)(function(){var e=p.find(function(e){return e.uniqueId===t});null!==j&&(null==j?void 0:j.visible)===(null==e?void 0:e.visible)||!e||k(e)},[p,t,j]),(0,react_1.useLayoutEffect)(function(){null!==j&&w(document.getElementById((0,MuiStore_1.composeDomId)(componentId,[n?"secondary":"primary"]))||null)},[n,j]),(0,react_1.useEffect)(function(){x((Math.random()+1).toString(36).substring(7))},[]),(0,react_1.useEffect)(function(){t||console.error("Please define an id for the status bar item")},[t]),(0,react_1.useEffect)(function(){return function(){I()}},[I]),(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:null!==j&&!!t&&M&&(0,react_dom_1.createPortal)(j.visible&&f&&(0,jsx_runtime_1.jsx)(SDiv,__assign({},{id:t,direction:"row",key:"mui-status-".concat(t),onClick:function(e){void 0===a||l||(e.preventDefault(),a(e),m({id:t,ownId:b,children:f}))},onContextMenu:function(e){e.preventDefault(),y&&void 0!==o&&!l&&o(e)},style:__assign(__assign({},i),{order:j.index}),highlight:s,hasclick:(!!a).toString(),isdisabled:l.toString()},{children:d?(0,jsx_runtime_1.jsx)(material_1.Tooltip,__assign({title:d,arrow:!0},{children:(0,jsx_runtime_1.jsx)(SSpan,{children:f})})):(0,jsx_runtime_1.jsx)(SSpan,{children:f})})),M)})}exports.default=default_1;