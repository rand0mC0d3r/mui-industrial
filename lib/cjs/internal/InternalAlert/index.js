"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var jsx_runtime_1=require("react/jsx-runtime"),Check_1=__importDefault(require("@mui/icons-material/Check")),ErrorOutlineOutlined_1=__importDefault(require("@mui/icons-material/ErrorOutlineOutlined")),PriorityHighOutlined_1=__importDefault(require("@mui/icons-material/PriorityHighOutlined")),WarningAmber_1=__importDefault(require("@mui/icons-material/WarningAmber")),material_1=require("@mui/material"),styles_1=require("@mui/material/styles"),react_1=require("react"),index_types_1=require("../../index.types"),Footer_1=__importDefault(require("./components/Footer")),Header_1=__importDefault(require("./components/Header")),SCode=(0,styles_1.styled)("textarea")(function(e){var t=e.height,i=e.theme;return{fontFamily:"monospace",padding:"8px",resize:"vertical",whiteSpace:"nowrap",marginTop:"8px",marginBottom:"8px",borderColor:"inherit",maxHeight:"300px",borderRadius:"4px",color:"inherit",backgroundColor:"".concat(i.palette.divider),minHeight:"".concat(20*t+10,"px"),"&::selection":{backgroundColor:"".concat(i.palette.divider),textDecoration:"underline",textDecorationStyle:"dotted",textDecorationColor:"".concat(i.palette.divider)},"&:focus-visible":{outline:"0px"}}}),SMessage=(0,styles_1.styled)(material_1.Typography)(function(e){var t=e.ellipsis;return{whiteSpace:"true"===t?"nowrap":"normal",overflow:"true"===t?"hidden":"unset",textOverflow:"true"===t?"ellipsis":"unset",lineHeight:"true"===t?"initial":"1.65"}}),SWrapper=(0,styles_1.styled)("div")(function(){return{display:"flex",flex:"1 1 auto",flexDirection:"column",alignItems:"stretch",justifyContent:"center"}}),SAlert=(0,styles_1.styled)(material_1.Alert)(function(e){var t=e.expanded;return{".MuiAlert-message":{minWidth:"unset",width:"100%",display:"flex",padding:"true"===t?"8px 0px":"0px",flexDirection:"true"===e.actions||"true"===t?"column":"row"}}});exports.default=function(e){var t=e.id,i=e.actions,r=e.source,n=e.severity,s=e.message,a=e.code,o=e.isRemoveFlag,l=void 0!==o&&o,u=(0,react_1.useState)(!1),_=u[0],c=u[1];(0,react_1.useEffect)(function(){i&&c(!0)},[i]);var d,p=function(e){return(0,jsx_runtime_1.jsx)(material_1.Tooltip,__assign({placement:"left",arrow:!0,title:"".concat(n.toUpperCase()).concat(r?" - Source: ".concat(r):"")},{children:(0,react_1.cloneElement)(e,{style:{fontSize:"inherit"}})}))};return(0,jsx_runtime_1.jsx)(SAlert,__assign({expanded:_.toString(),actions:((null==i?void 0:i.length)>0).toString(),onDoubleClick:function(){return!i&&c(!_)},icon:(0,jsx_runtime_1.jsxs)("span",__assign({style:{lineHeight:"0px"}},{children:[n===index_types_1.Severity.INFO&&p((0,jsx_runtime_1.jsx)(PriorityHighOutlined_1.default,{})),n===index_types_1.Severity.SUCCESS&&p((0,jsx_runtime_1.jsx)(Check_1.default,{})),n===index_types_1.Severity.WARNING&&p((0,jsx_runtime_1.jsx)(WarningAmber_1.default,{})),n===index_types_1.Severity.ERROR&&p((0,jsx_runtime_1.jsx)(ErrorOutlineOutlined_1.default,{}))]}))},{severity:n},{children:(0,jsx_runtime_1.jsxs)(SWrapper,{children:[(0,jsx_runtime_1.jsx)(Header_1.default,__assign({},{id:t,code:a,actions:i,severity:n,message:s,isRemoveFlag:l,isExpanded:_,setIsExpanded:c})),(_||i)&&(void 0===d&&(d=!1),(0,jsx_runtime_1.jsx)(SMessage,__assign({ellipsis:d.toString()},{children:s}))),_&&a&&(0,jsx_runtime_1.jsx)(SCode,{defaultValue:a,spellCheck:"false",height:Math.min(10,a.split("\n").length)}),(_||i)&&(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:(r||i)&&(0,jsx_runtime_1.jsx)(Footer_1.default,__assign({},{actions:i,severity:n,source:r}))})]})}),t)};