"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var jsx_runtime_1=require("react/jsx-runtime"),material_1=require("@mui/material"),re_resizable_1=require("re-resizable"),react_1=require("react"),index_types_1=require("../../index.types"),Store_1=__importDefault(require("../../Store")),InternalActions_1=__importDefault(require("../InternalActions")),css_1=require("./css"),kbdId="console",domId=index_types_1.domConsoleId,domIdWrapper="mui-status-console-wrapper",relevantType="console";exports.default=function(){var e=(0,react_1.useContext)(Store_1.default),t=e.status,n=e.updateConsoleActiveId,i=e.updateIsConsoleOpen,r=e.handleKeyboardRegister,s=(0,react_1.useContext)(Store_1.default).settings,o=s.consoleActiveId,a=s.isConsoleOpen,_=s.position,l=function(e){return e===o},c=t.filter(function(e){return e.type===relevantType}),u=(0,react_1.useState)(),d=u[0],x=u[1],p=(0,react_1.useState)("100%"),m=p[0],f=p[1],j=(0,react_1.useCallback)(function(e){var t=Number((d||"350px").replace("px",""))+e;t<125?n({id:void 0}):(x("".concat(t,"px")),f("100%"))},[d,n]);return(0,react_1.useEffect)(function(){d&&localStorage.setItem(index_types_1.localStorageKeyHeight,d)},[d]),(0,react_1.useEffect)(function(){var e=localStorage.getItem(index_types_1.localStorageKeyHeight);e&&x(e)},[]),(0,react_1.useEffect)(function(){r({id:kbdId,ascii:27,char:"",onTrigger:function(){return i()},label:"Hide/Show console"})}),(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:a&&(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:t.some(function(e){return e.type===relevantType})&&(0,jsx_runtime_1.jsx)(css_1.StyledWrapper,__assign({},{id:domIdWrapper},{bottom:String(_===index_types_1.PlacementPosition.BOTTOM)},{children:(0,jsx_runtime_1.jsx)(re_resizable_1.Resizable,__assign({enable:{left:!1,right:!1,top:_===index_types_1.PlacementPosition.BOTTOM,bottom:_===index_types_1.PlacementPosition.TOP,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},onResizeStop:function(e,t,n,i){return j(i.height)},style:{display:"flex",flexDirection:"column"},minHeight:"75px",maxHeight:"950px",defaultSize:{width:m,height:d||"350px"}},{children:(0,jsx_runtime_1.jsx)(css_1.StyledResizable,{children:c.some(function(e){return e.uniqueId===o})?(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:(0,jsx_runtime_1.jsxs)(css_1.StyledContainer,__assign({position:_.toString()},{children:[(0,jsx_runtime_1.jsxs)(css_1.StyledTabsAndActionWrapper,{children:[(0,jsx_runtime_1.jsx)(css_1.StyledTabs,{children:c.map(function(e){var t=e.uniqueId,i=e.options,r=e.children;return(0,jsx_runtime_1.jsx)(css_1.StyledTab,__assign({},{key:t,variant:"caption",onClick:function(){return n({id:t})},activated:l(t).toString()},{children:(0,jsx_runtime_1.jsxs)(material_1.Box,__assign({display:"flex",flexDirection:"row",flexWrap:"nowrap",style:{gap:"8px"}},{children:[r||t,(0,jsx_runtime_1.jsx)(InternalActions_1.default,{actions:i.actions,fontSize:"14px"})]}))}))})}),(0,jsx_runtime_1.jsx)(material_1.Tooltip,__assign({},{title:"Close console section"},{arrow:!0,placement:_===index_types_1.PlacementPosition.BOTTOM?"top":"bottom"},{children:(0,jsx_runtime_1.jsx)(material_1.IconButton,__assign({onClick:function(){return n({})},size:"small"},{children:(0,jsx_runtime_1.jsx)(css_1.StyledCloseIcon,{style:{fontSize:"16px"}})}))}))]}),(0,jsx_runtime_1.jsx)(css_1.StyledStatusConsole,__assign({},{id:domId}))]}))}):(0,jsx_runtime_1.jsx)(css_1.StyledEmptyWrapper,{children:(0,jsx_runtime_1.jsx)(material_1.Box,__assign({display:"flex",flexDirection:"row",style:{gap:"8px"}},{children:t.filter(function(e){return e.type===relevantType}).map(function(e){return(0,jsx_runtime_1.jsx)(material_1.Button,__assign({style:{padding:"24px",textTransform:"unset"},variant:"outlined",color:"inherit",onClick:function(){return n({id:e.uniqueId})}},{children:(0,jsx_runtime_1.jsxs)(material_1.Box,__assign({display:"flex",flexDirection:"column",style:{gap:"8px"}},{children:[e.children,(0,jsx_runtime_1.jsx)(material_1.Typography,__assign({variant:"caption",color:"textSecondary"},{children:e.options.title}))]}))}),e.uniqueId)})}))})})}))}))})})};