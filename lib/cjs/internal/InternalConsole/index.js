"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var jsx_runtime_1=require("react/jsx-runtime"),AppsOutage_1=__importDefault(require("@mui/icons-material/AppsOutage")),Close_1=__importDefault(require("@mui/icons-material/Close")),material_1=require("@mui/material"),styles_1=require("@mui/material/styles"),re_resizable_1=require("re-resizable"),react_1=require("react"),index_types_1=require("../../index.types"),Store_1=__importDefault(require("../../Store")),StyledStatusConsole=(0,styles_1.styled)("div")(function(){return{flex:"1 0 auto",overflow:"hidden",display:"flex"}}),StyledResizable=(0,styles_1.styled)("div")(function(){return{display:"flex",flexDirection:"column",flex:"1 1 auto"}}),StyledWrapper=(0,styles_1.styled)("div")(function(e){var t=e.theme,r=e.bottom;return{display:"flex",flexDirection:"column",position:"absolute",borderTop:"1px solid ".concat(t.palette.divider),backgroundColor:t.palette.background.default,bottom:"true"===r?"0px":"unset",top:"true"!==r?"0px":"unset",left:"0px",alignItems:"center",right:"0px",zIndex:999,"& > div > div:nth-child(2) > div:not(:first-child)":{display:"none"}}}),StyledEmptyWrapper=(0,styles_1.styled)("div")(function(){return{display:"flex",flexDirection:"column",flex:"1 1 auto",justifyContent:"center",alignItems:"center",gap:"8px"}}),StyledTabs=(0,styles_1.styled)("div")(function(){return{display:"flex",flexDirection:"row",gap:"0px"}}),StyledCloseIcon=(0,styles_1.styled)(Close_1.default)(function(){return{fontSize:"20px"}}),StyledTab=(0,styles_1.styled)(material_1.Typography)(function(e){var t=e.theme,r=e.activated;return{padding:"4px 12px",cursor:"pointer",backgroundColor:"true"===r?t.palette.primary.main:"transparent",color:"true"===r?t.palette.background.default:t.palette.text.secondary,"&:hover":{backgroundColor:"true"===r?t.palette.primary.dark:t.palette.divider,color:"true"===r?t.palette.background.default:t.palette.text.primary}}}),domId="mui-status-console",domIdWrapper="mui-status-console-wrapper",relevantType="console";function default_1(){var e=(0,react_1.useContext)(Store_1.default),t=e.status,r=e.updateConsoleActiveId,n=e.updateIsConsoleOpen,i=(0,react_1.useContext)(Store_1.default).settings,s=i.consoleActiveId,a=i.isConsoleOpen,l=i.position,o=function(e){return e===s},u=t.filter(function(e){return e.type===relevantType}),d=(0,react_1.useState)("300px"),_=d[0],c=d[1],p=(0,react_1.useState)("100%"),x=p[0],m=p[1],y=(0,react_1.useCallback)(function(e){27===e.keyCode&&n()},[]);return(0,react_1.useEffect)(function(){return window.addEventListener("keydown",y),function(){window.removeEventListener("keydown",y)}},[y]),(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:a&&(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:t.some(function(e){return e.type===relevantType})&&(0,jsx_runtime_1.jsx)(StyledWrapper,__assign({},{id:domIdWrapper},{bottom:String(l===index_types_1.PlacementPosition.Bottom)},{children:(0,jsx_runtime_1.jsx)(re_resizable_1.Resizable,__assign({onResizeStop:function(e,t,n,i){var s=Number(_.replace("px",""))+i.height;s<125?r({}):(c("".concat(s,"px")),m("100%"))},style:{display:"flex",flexDirection:"column"},minHeight:"75px",maxHeight:"950px",defaultSize:{width:x,height:_}},{children:(0,jsx_runtime_1.jsx)(StyledResizable,{children:u.some(function(e){return e.uniqueId===s})?(0,jsx_runtime_1.jsxs)("div",__assign({style:{flex:"1 1 auto",display:"flex",flexDirection:"column"}},{children:[(0,jsx_runtime_1.jsxs)("div",__assign({style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},{children:[(0,jsx_runtime_1.jsx)(StyledTabs,{children:u.map(function(e){var t=e.uniqueId,n=e.title;return(0,jsx_runtime_1.jsx)(StyledTab,__assign({},{key:t,variant:"caption",onClick:function(){return r({id:t})},activated:o(t).toString()},{children:n||t}))})}),(0,jsx_runtime_1.jsx)(material_1.Tooltip,__assign({},{title:"Close console section"},{children:(0,jsx_runtime_1.jsx)(StyledCloseIcon,__assign({},{onClick:function(){return r({})}}))}))]})),(0,jsx_runtime_1.jsx)(StyledStatusConsole,__assign({},{id:domId}))]})):(0,jsx_runtime_1.jsxs)(StyledEmptyWrapper,{children:[(0,jsx_runtime_1.jsx)(AppsOutage_1.default,{}),(0,jsx_runtime_1.jsx)(material_1.Typography,__assign({},{variant:"caption",color:"textSecondary"},{children:"Seems no consoles available. Select one from above"}))]})})}))}))})})}exports.default=default_1;