"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var jsx_runtime_1=require("react/jsx-runtime"),CheckBoxOutlineBlankOutlined_1=__importDefault(require("@mui/icons-material/CheckBoxOutlineBlankOutlined")),CheckBoxOutlined_1=__importDefault(require("@mui/icons-material/CheckBoxOutlined")),material_1=require("@mui/material"),styles_1=require("@mui/material/styles"),react_1=require("react"),index_types_1=require("../../index.types"),Store_1=__importDefault(require("../../Store")),InternalCommands_1=__importDefault(require("../InternalCommands")),InternalConsole_1=__importDefault(require("../InternalConsole")),InternalKeyboard_1=__importDefault(require("../InternalKeyboard")),InternalNotifications_1=__importDefault(require("../InternalNotifications")),InternalStatus_1=__importDefault(require("../InternalStatus")),SBox=(0,styles_1.styled)("div")(function(e){return{height:"100%",width:"100%",gap:"0px",position:"absolute",display:"flex",top:"0px",bottom:"0px",left:"0px",right:"0px",flexDirection:e.column===index_types_1.PlacementPosition.TOP?"column-reverse":"column"}}),SNotifications=(0,styles_1.styled)("div")(function(e){var t=e.column;return{gap:"0px",position:"absolute",display:"flex",right:"16px",zIndex:112,bottom:t!==index_types_1.PlacementPosition.TOP?"unset":"32px",top:t!==index_types_1.PlacementPosition.TOP?"32px":"unset",flexDirection:t===index_types_1.PlacementPosition.TOP?"column-reverse":"column"}}),SChildren=(0,styles_1.styled)("div")(function(){return{flex:"1 1 auto",overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"}}),StyledTypographyNoChildren=(0,styles_1.styled)(material_1.Typography)(function(){return{userSelect:"none"}}),SElement=(0,styles_1.styled)("div")(function(){return{display:"flex",flexDirection:"row",gap:"16px",padding:"8px"}}),SElementItem=(0,styles_1.styled)("div")(function(e){var t=e.theme;return{display:"flex",minWidth:"165px",cursor:"pointer",flexDirection:"row",alignItems:"center",gap:"4px",padding:"4px 6px","&:hover":{backgroundColor:t.palette.primary.light,color:"".concat(t.palette.background.default," !important")}}}),SStatusContainer=(0,styles_1.styled)("div")(function(e){var t=e.theme,n=e.hasBorder;return{alignSelf:"stretch",justifyContent:"center",display:"flex",boxShadow:e.fullWidth&&n?["inset 0px 0px 0px 1px ".concat(t.palette.divider)].join(","):"none",backgroundColor:"light"===t.palette.mode?t.palette.background.default:t.palette.background.paper}});exports.default=function(e){var t=e.children,n=e.style,i=(0,react_1.useContext)(Store_1.default),r=i.status,o=i.shortcuts,l=i.settings,s=i.handleStatusVisibilityToggle,a=l,u=a.position,_=a.fullWidth,c=a.hasBorder,d=(0,react_1.useState)(null),p=d[0],x=d[1],m=Boolean(p),f=function(e){return(0,jsx_runtime_1.jsxs)(SElementItem,__assign({onClick:function(){return s({id:e.uniqueId})}},{children:[e.visible?(0,jsx_runtime_1.jsx)(CheckBoxOutlined_1.default,{}):(0,jsx_runtime_1.jsx)(CheckBoxOutlineBlankOutlined_1.default,{}),e.children||(0,jsx_runtime_1.jsx)(StyledTypographyNoChildren,__assign({variant:"caption",color:"textSecondary"},{children:"No content for child"}))]}))};return(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsxs)(SBox,__assign({id:"mui-status-wrapper"},{column:u},{children:[(0,jsx_runtime_1.jsxs)(SChildren,__assign({id:"mui-status-children"},{children:[t,r.some(function(e){return e.type===index_types_1.StatusType.CONSOLE})&&(0,jsx_runtime_1.jsx)(InternalConsole_1.default,{}),(0,jsx_runtime_1.jsx)(InternalCommands_1.default,{})]})),r.some(function(e){return e.visible})&&(0,jsx_runtime_1.jsx)(SStatusContainer,__assign({},{fullWidth:_,hasBorder:c,onContextMenu:function(e){e.preventDefault(),x(e.currentTarget)}},{children:(0,jsx_runtime_1.jsx)(InternalStatus_1.default,__assign({},{style:n}))})),(0,jsx_runtime_1.jsx)(SNotifications,__assign({},{column:u},{children:(0,jsx_runtime_1.jsx)(InternalNotifications_1.default,{})})),o.length>0&&(0,jsx_runtime_1.jsx)(InternalKeyboard_1.default,{})]})),(0,jsx_runtime_1.jsx)(material_1.Popover,__assign({id:"toggle-status-popover"},{open:m,anchorEl:p,onClose:function(){return x(null)},elevation:1},{anchorOrigin:{vertical:u===index_types_1.PlacementPosition.TOP?"top":"bottom",horizontal:"center"},transformOrigin:{vertical:u===index_types_1.PlacementPosition.BOTTOM?"bottom":"top",horizontal:"center"},style:{marginTop:"".concat(12*(u===index_types_1.PlacementPosition.TOP?1:-1),"px")}},{children:(0,jsx_runtime_1.jsx)(SElement,__assign({},{onContextMenu:function(e){e.preventDefault()}},{children:[!1,!0].map(function(e){return(0,jsx_runtime_1.jsx)("div",{children:r.filter(function(t){return t.secondary===e}).map(function(e){return function(e){return(0,jsx_runtime_1.jsx)(material_1.Tooltip,__assign({},{key:e.uniqueId,title:"Toggle visibility of tile"},{children:f(e)}))}(e)})},e.toString())})}))}))]})};