var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from"react/jsx-runtime";import{useContext,useEffect,useState}from"react";import{createPortal}from"react-dom";import MupStatus from"../MuiStatus";import DataProvider from"../MuiStore";export default function(t){var e=t.id,n=t.secondary,o=void 0!==n&&n,s=t.style,i=t.onClick,r=t.tooltip,u=void 0===r?"":r,a=t.children,l=t.console,c=t.consoleTitle,d=useContext(DataProvider),f=d.status,p=d.handleStatusTypeUpdate,m=d.handleStatusConsoleTypeUpdate,_=d.updateConsoleActiveId,g=useContext(DataProvider).settings,v=g.consoleActiveId,h=g.isConsoleOpen,x=useState(null),y=x[0],j=x[1],S=useState(null),C=S[0],I=S[1];return useEffect(function(){I(document.getElementById("mui-status-console")||null)},[y,v,h]),useEffect(function(){var t=f.find(function(t){return t.uniqueId===e});null===y&&t&&(j(t),p({id:e,type:"console"}))},[f,e,y]),useEffect(function(){y&&m({id:e,title:c})},[y,e,c]),_jsxs(_Fragment,{children:[_jsx(MupStatus,__assign({},{id:e,tooltip:u,secondary:o,highlight:y&&h&&(null==y?void 0:y.uniqueId)===v?"primary":"default",onClick:function(){return i&&i(),void _(h&&v===e?{}:{id:null==y?void 0:y.uniqueId})},style:__assign(__assign({},s),{cursor:"context-menu",minWidth:"24px"})},{children:a})),C&&y&&y.uniqueId===v&&createPortal(l,C)]})}