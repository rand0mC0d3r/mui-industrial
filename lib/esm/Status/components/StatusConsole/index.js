var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from"react/jsx-runtime";import{useContext,useEffect,useState}from"react";import{createPortal}from"react-dom";import{domConsoleId,Highlight,StatusType}from"../../../index.types";import DataProvider from"../../../Store";import StatusCore from"../StatusCore";export default function(t){var e=t.id,o=t.order,n=t.disabled,i=t.options,s=t.secondary,r=t.tooltip,a=t.onClick,u=t.onContextMenu,d=t.style,l=t.className,c=t.children,f=useContext(DataProvider),p=f.status,m=f.updateConsoleActiveId,g=useContext(DataProvider).handleStatusTypeUpdate,h=useContext(DataProvider).settings,v=h.consoleActiveId,C=h.isConsoleOpen,x=useState(void 0),y=x[0],_=x[1],S=useState(null),I=S[0],j=S[1],E=y&&C&&(null==y?void 0:y.uniqueId)===v?Highlight.PRIMARY:Highlight.DEFAULT;return useEffect(function(){j(document.getElementById(domConsoleId)||null)},[y,v,C]),useEffect(function(){_(p.find(function(t){return t.uniqueId===e}))},[p,e]),useEffect(function(){y&&y.type!==StatusType.CONSOLE&&g({id:e,type:StatusType.CONSOLE})},[y,e,g]),_jsxs(_Fragment,{children:[_jsx(StatusCore,__assign({},{id:e,order:o,tooltip:r,secondary:s,disabled:n,options:i,highlight:E,onClick:function(t){a&&a(t),y&&m(C&&v===e?{id:void 0}:{id:null==y?void 0:y.uniqueId})},onContextMenu:u,style:d,className:l},{children:c})),I&&(null==i?void 0:i.content)&&(null==y?void 0:y.uniqueId)===v&&createPortal(null==i?void 0:i.content,I)]})}