var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from"react/jsx-runtime";import AppsOutageIcon from"@mui/icons-material/AppsOutage";import CloseIcon from"@mui/icons-material/Close";import{Tooltip,Typography}from"@mui/material";import{styled}from"@mui/material/styles";import{Resizable}from"re-resizable";import{useCallback,useContext,useEffect,useState}from"react";import DataProvider from"../../MuiStore";var StyledStatusConsole=styled("div")(function(){return{flex:"1 0 auto",overflow:"hidden"}}),StyledResizable=styled("div")(function(){return{display:"flex",flexDirection:"column",flex:"1 1 auto"}}),StyledWrapper=styled("div")(function(e){var t=e.theme;return{display:"flex",flexDirection:"column",position:"absolute",borderTop:"1px solid ".concat(t.palette.divider),backgroundColor:t.palette.background.default,bottom:"0px",left:"0px",alignItems:"center",right:"0px","& > div > div:nth-child(2) > div:not(:first-child)":{display:"none"}}}),StyledEmptyWrapper=styled("div")(function(){return{display:"flex",flexDirection:"column",flex:"1 1 auto",justifyContent:"center",alignItems:"center",gap:"8px"}}),StyledTabs=styled("div")(function(){return{display:"flex",flexDirection:"row",gap:"0px"}}),StyledCloseIcon=styled(CloseIcon)(function(){return{fontSize:"20px"}}),StyledTab=styled(Typography)(function(e){var t=e.theme,n=e.activated;return{padding:"4px 12px",cursor:"pointer",backgroundColor:"true"===n?t.palette.primary.main:"transparent",color:"true"===n?t.palette.background.default:t.palette.text.secondary,"&:hover":{backgroundColor:"true"===n?t.palette.primary.dark:t.palette.divider,color:"true"===n?t.palette.background.default:t.palette.text.primary}}}),domId="mui-status-console",domIdWrapper="mui-status-console-wrapper",relevantType="console";export default function(){var e=useContext(DataProvider),t=e.status,n=e.updateConsoleActiveId,r=e.updateIsConsoleOpen,o=useContext(DataProvider).settings,i=o.consoleActiveId,a=o.isConsoleOpen,s=function(e){return e===i},l=t.filter(function(e){return e.type===relevantType}),d=useState("300px"),c=d[0],p=d[1],u=useState("100%"),f=u[0],m=u[1],y=useCallback(function(e){27===e.keyCode&&r()},[]);return useEffect(function(){return window.addEventListener("keydown",y),function(){window.removeEventListener("keydown",y)}},[y]),_jsx(_Fragment,{children:a&&_jsx(_Fragment,{children:t.some(function(e){return e.type===relevantType})&&_jsx(StyledWrapper,__assign({},{id:domIdWrapper},{children:_jsx(Resizable,__assign({onResizeStop:function(e,t,r,o){var i=Number(c.replace("px",""))+o.height;i<125?n({}):(p("".concat(i,"px")),m("100%"))},style:{display:"flex",flexDirection:"column"},minHeight:"75px",maxHeight:"950px",defaultSize:{width:f,height:c}},{children:_jsx(StyledResizable,{children:l.some(function(e){return e.uniqueId===i})?_jsxs("div",__assign({style:{flex:"1 1 auto",display:"flex",flexDirection:"column"}},{children:[_jsxs("div",__assign({style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},{children:[_jsx(StyledTabs,{children:l.map(function(e){var t=e.uniqueId,r=e.title;return _jsx(StyledTab,__assign({},{key:t,variant:"caption",onClick:function(){return n({id:t})},activated:s(t).toString()},{children:r||t}))})}),_jsx(Tooltip,__assign({},{title:"Close console section"},{children:_jsx(StyledCloseIcon,__assign({},{onClick:function(){return n({})}}))}))]})),_jsx(StyledStatusConsole,__assign({},{id:domId}))]})):_jsxs(StyledEmptyWrapper,{children:[_jsx(AppsOutageIcon,{}),_jsx(Typography,__assign({},{variant:"caption",color:"textSecondary"},{children:"Seems no consoles available. Select one from above"}))]})})}))}))})})}