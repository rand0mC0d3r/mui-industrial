var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from"react/jsx-runtime";import CheckBoxOutlineBlankOutlinedIcon from"@mui/icons-material/CheckBoxOutlineBlankOutlined";import CheckBoxOutlinedIcon from"@mui/icons-material/CheckBoxOutlined";import{Popover,Tooltip,Typography}from"@mui/material";import{styled}from"@mui/material/styles";import{useContext,useState}from"react";import{PlacementPosition,StatusType}from"../../index.types";import DataProvider from"../../Store";import InternalCommands from"../InternalCommands";import InternalConsole from"../InternalConsole";import InternalKeyboard from"../InternalKeyboard";import InternalNotifications from"../InternalNotifications";import InternalStatus from"../InternalStatus";var SBox=styled("div")(function(t){return{height:"100%",width:"100%",gap:"0px",position:"absolute",display:"flex",top:"0px",bottom:"0px",left:"0px",right:"0px",flexDirection:t.column===PlacementPosition.TOP?"column-reverse":"column"}}),SNotifications=styled("div")(function(t){var n=t.column;return{gap:"0px",position:"absolute",display:"flex",right:"16px",zIndex:112,bottom:n!==PlacementPosition.TOP?"unset":"32px",top:n!==PlacementPosition.TOP?"32px":"unset",flexDirection:n===PlacementPosition.TOP?"column-reverse":"column"}}),SChildren=styled("div")(function(){return{flex:"1 1 auto",overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"}}),StyledTypographyNoChildren=styled(Typography)(function(){return{userSelect:"none"}}),SElement=styled("div")(function(){return{display:"flex",flexDirection:"row",gap:"16px",padding:"8px"}}),SElementItem=styled("div")(function(t){var n=t.theme;return{display:"flex",minWidth:"165px",cursor:"pointer",flexDirection:"row",alignItems:"center",gap:"4px",padding:"4px 6px","&:hover":{backgroundColor:n.palette.primary.light,color:"".concat(n.palette.background.default," !important")}}}),SStatusContainer=styled("div")(function(t){var n=t.theme,e=t.hasBorder;return{alignSelf:"stretch",justifyContent:"center",display:"flex",boxShadow:t.fullWidth&&e?["inset 0px 0px 0px 1px ".concat(n.palette.divider)].join(","):"none",backgroundColor:"light"===n.palette.mode?n.palette.background.default:n.palette.background.paper}});export default function(t){var n=t.children,e=t.style,o=useContext(DataProvider),i=o.status,r=o.shortcuts,l=o.settings,a=o.handleStatusVisibilityToggle,s=l,u=s.position,c=s.fullWidth,p=s.hasBorder,d=useState(null),m=d[0],x=d[1],f=Boolean(m),h=function(t){return _jsxs(SElementItem,__assign({onClick:function(){return a({id:t.uniqueId})}},{children:[t.visible?_jsx(CheckBoxOutlinedIcon,{}):_jsx(CheckBoxOutlineBlankOutlinedIcon,{}),t.children||_jsx(StyledTypographyNoChildren,__assign({variant:"caption",color:"textSecondary"},{children:"No content for child"}))]}))};return _jsxs(_Fragment,{children:[_jsxs(SBox,__assign({id:"mui-status-wrapper"},{column:u},{children:[_jsxs(SChildren,__assign({id:"mui-status-children"},{children:[n,i.some(function(t){return t.type===StatusType.CONSOLE})&&_jsx(InternalConsole,{}),_jsx(InternalCommands,{})]})),i.some(function(t){return t.visible})&&_jsx(SStatusContainer,__assign({},{fullWidth:c,hasBorder:p,onContextMenu:function(t){t.preventDefault(),x(t.currentTarget)}},{children:_jsx(InternalStatus,__assign({},{style:e}))})),_jsx(SNotifications,__assign({},{column:u},{children:_jsx(InternalNotifications,{})})),r.length>0&&_jsx(InternalKeyboard,{})]})),_jsx(Popover,__assign({id:"toggle-status-popover"},{open:f,anchorEl:m,onClose:function(){return x(null)},elevation:1},{anchorOrigin:{vertical:u===PlacementPosition.TOP?"top":"bottom",horizontal:"center"},transformOrigin:{vertical:u===PlacementPosition.BOTTOM?"bottom":"top",horizontal:"center"},style:{marginTop:"".concat(12*(u===PlacementPosition.TOP?1:-1),"px")}},{children:_jsx(SElement,__assign({},{onContextMenu:function(t){t.preventDefault()}},{children:[!1,!0].map(function(t){return _jsx("div",{children:i.filter(function(n){return n.secondary===t}).map(function(t){return function(t){return _jsx(Tooltip,__assign({},{key:t.uniqueId,title:"Toggle visibility of tile"},{children:h(t)}))}(t)})},t.toString())})}))}))]})}