var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from"react/jsx-runtime";import CheckBoxOutlineBlankOutlinedIcon from"@mui/icons-material/CheckBoxOutlineBlankOutlined";import CheckBoxOutlinedIcon from"@mui/icons-material/CheckBoxOutlined";import{Popover,Tooltip,Typography}from"@mui/material";import{styled}from"@mui/material/styles";import{useContext,useState}from"react";import InternalStatus from"../InternalStatus";import DataProvider from"../../Store";import{PlacementPosition,StatusType}from"../../index.types";import InternalConsole from"../InternalConsole";var SBox=styled("div")(function(t){return{height:"100%",width:"100%",gap:"0px",position:"absolute",display:"flex",top:"0px",bottom:"0px",left:"0px",right:"0px",flexDirection:t.column===PlacementPosition.Top?"column-reverse":"column"}}),SChildren=styled("div")(function(){return{flex:"1 1 auto",overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"}}),StyledTypographyNoChildren=styled(Typography)(function(){return{userSelect:"none"}}),SElement=styled("div")(function(){return{display:"flex",flexDirection:"row",gap:"16px",padding:"8px"}}),SElementItem=styled("div")(function(t){var e=t.theme;return{display:"flex",minWidth:"165px",cursor:"pointer",flexDirection:"row",alignItems:"center",gap:"4px",padding:"4px 6px","&:hover":{backgroundColor:e.palette.primary.light,color:"".concat(e.palette.background.default," !important")}}}),SStatusWrapper=styled("div")(function(t){var e=t.theme,n=t.position;return{gap:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"light"===e.palette.mode?e.palette.background.default:e.palette.background.paper,boxShadow:"inset 0px ".concat("top"===n?-3:3,"px 0px -2px ").concat(e.palette.divider)}});export default function(t){var e=t.children,n=useContext(DataProvider),o=n.status,i=n.handleStatusVisibilityToggle,r=useContext(DataProvider).settings,a=r.position,l=r.upperBar,s=useState(null),u=s[0],p=s[1],c=Boolean(u),d=function(t){return _jsxs(SElementItem,__assign({onClick:function(){return i({id:t.uniqueId})}},{children:[t.visible?_jsx(CheckBoxOutlinedIcon,{}):_jsx(CheckBoxOutlineBlankOutlinedIcon,{}),t.children||_jsx(StyledTypographyNoChildren,__assign({variant:"caption",color:"textSecondary"},{children:"No content for child"}))]}))};return _jsxs(_Fragment,{children:[_jsxs(SBox,__assign({id:"mui-status-wrapper"},{column:a},{children:[_jsxs(SChildren,__assign({id:"mui-status-children"},{children:[e,o.some(function(t){return t.type===StatusType.CONSOLE})&&_jsx(InternalConsole,{})]})),o.some(function(t){return t.visible})&&_jsx(SStatusWrapper,__assign({},{position:a,onContextMenu:function(t){t.preventDefault(),p(t.currentTarget)}},{children:_jsx(InternalStatus,{})}))]})),_jsx(Popover,__assign({id:"toggle-status-popover"},{open:c,anchorEl:u,onClose:function(){return p(null)},elevation:1},{anchorOrigin:{vertical:l?"top":"bottom",horizontal:"center"},transformOrigin:{vertical:l?"top":"bottom",horizontal:"center"},style:{marginTop:"".concat(12*(l?1:-1),"px")}},{children:_jsx(SElement,__assign({},{onContextMenu:function(t){t.preventDefault()}},{children:[!1,!0].map(function(t){return _jsx("div",{children:o.filter(function(e){return e.secondary===t}).map(function(t){return function(t){return _jsx(Tooltip,__assign({},{key:t.uniqueId,title:"Toggle visibility of tile"},{children:d(t)}))}(t)})},t.toString())})}))}))]})}