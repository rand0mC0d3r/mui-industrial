var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from"react/jsx-runtime";import CheckIcon from"@mui/icons-material/Check";import ErrorOutlineOutlinedIcon from"@mui/icons-material/ErrorOutlineOutlined";import PriorityHighOutlinedIcon from"@mui/icons-material/PriorityHighOutlined";import WarningAmberIcon from"@mui/icons-material/WarningAmber";import{Alert,Tooltip,Typography}from"@mui/material";import{styled}from"@mui/material/styles";import{cloneElement,useEffect,useState}from"react";import{Severity}from"../../index.types";import Footer from"./components/Footer";import Header from"./components/Header";var SCode=styled("textarea")(function(e){var t=e.height,i=e.theme;return{fontFamily:"monospace",padding:"8px",resize:"vertical",whiteSpace:"nowrap",marginTop:"8px",marginBottom:"8px",borderColor:"inherit",maxHeight:"300px",borderRadius:"4px",color:"inherit",backgroundColor:"".concat(i.palette.divider),minHeight:"".concat(20*t+10,"px"),"&::selection":{backgroundColor:"".concat(i.palette.divider),textDecoration:"underline",textDecorationStyle:"dotted",textDecorationColor:"".concat(i.palette.divider)},"&:focus-visible":{outline:"0px"}}}),SMessage=styled(Typography)(function(e){var t=e.ellipsis;return{whiteSpace:"true"===t?"nowrap":"normal",overflow:"true"===t?"hidden":"unset",textOverflow:"true"===t?"ellipsis":"unset",lineHeight:"true"===t?"initial":"1.65"}}),SWrapper=styled("div")(function(){return{display:"flex",flex:"1 1 auto",flexDirection:"column",alignItems:"stretch",justifyContent:"center"}}),SAlert=styled(Alert)(function(e){var t=e.expanded;return{".MuiAlert-message":{minWidth:"unset",width:"100%",display:"flex",padding:"true"===t?"8px 0px":"0px",flexDirection:"true"===e.actions||"true"===t?"column":"row"}}});export default function(e){var t=e.id,i=e.actions,r=e.source,n=e.severity,o=e.message,s=e.code,a=e.isRemoveFlag,l=void 0!==a&&a,c=useState(!1),u=c[0],p=c[1];useEffect(function(){i&&p(!0)},[i]);var d,m=function(e){return _jsx(Tooltip,__assign({placement:"left",arrow:!0,title:"".concat(n.toUpperCase()).concat(r?" - Source: ".concat(r):"")},{children:cloneElement(e,{style:{fontSize:"inherit"}})}))};return _jsx(SAlert,__assign({expanded:u.toString(),actions:((null==i?void 0:i.length)>0).toString(),onDoubleClick:function(){return!i&&p(!u)},icon:_jsxs("span",__assign({style:{lineHeight:"0px"}},{children:[n===Severity.INFO&&m(_jsx(PriorityHighOutlinedIcon,{})),n===Severity.SUCCESS&&m(_jsx(CheckIcon,{})),n===Severity.WARNING&&m(_jsx(WarningAmberIcon,{})),n===Severity.ERROR&&m(_jsx(ErrorOutlineOutlinedIcon,{}))]}))},{severity:n},{children:_jsxs(SWrapper,{children:[_jsx(Header,__assign({},{id:t,code:s,actions:i,severity:n,message:o,isRemoveFlag:l,isExpanded:u,setIsExpanded:p})),(u||i)&&(void 0===d&&(d=!1),_jsx(SMessage,__assign({ellipsis:d.toString()},{children:o}))),u&&s&&_jsx(SCode,{defaultValue:s,spellCheck:"false",height:Math.min(10,s.split("\n").length)}),(u||i)&&_jsx(_Fragment,{children:(r||i)&&_jsx(Footer,__assign({},{actions:i,severity:n,source:r}))})]})}),t)}