var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from"react/jsx-runtime";import AppsOutageIcon from"@mui/icons-material/AppsOutage";import CloseIcon from"@mui/icons-material/Close";import{Tooltip,Typography}from"@mui/material";import{styled}from"@mui/material/styles";import{Resizable}from"re-resizable";import{useCallback,useContext,useEffect,useState}from"react";import{PlacementPosition}from"../../index.types";import DataProvider from"../../Store";var StyledStatusConsole=styled("div")(function(){return{flex:"1 0 auto",overflow:"hidden"}}),StyledResizable=styled("div")(function(){return{display:"flex",flexDirection:"column",flex:"1 1 auto"}}),StyledWrapper=styled("div")(function(e){var t=e.theme,n=e.bottom;return{display:"flex",flexDirection:"column",position:"absolute",borderTop:"1px solid ".concat(t.palette.divider),backgroundColor:t.palette.background.default,bottom:"true"===n?"0px":"unset",top:"true"!==n?"0px":"unset",left:"0px",alignItems:"center",right:"0px",zIndex:999,"& > div > div:nth-child(2) > div:not(:first-child)":{display:"none"}}}),StyledEmptyWrapper=styled("div")(function(){return{display:"flex",flexDirection:"column",flex:"1 1 auto",justifyContent:"center",alignItems:"center",gap:"8px"}}),StyledTabs=styled("div")(function(){return{display:"flex",flexDirection:"row",gap:"0px"}}),StyledCloseIcon=styled(CloseIcon)(function(){return{fontSize:"20px"}}),StyledTab=styled(Typography)(function(e){var t=e.theme,n=e.activated;return{padding:"4px 12px",cursor:"pointer",backgroundColor:"true"===n?t.palette.primary.main:"transparent",color:"true"===n?t.palette.background.default:t.palette.text.secondary,"&:hover":{backgroundColor:"true"===n?t.palette.primary.dark:t.palette.divider,color:"true"===n?t.palette.background.default:t.palette.text.primary}}}),domId="mui-status-console",domIdWrapper="mui-status-console-wrapper",relevantType="console";export default function(){var e=useContext(DataProvider),t=e.status,n=e.updateConsoleActiveId,o=e.updateIsConsoleOpen,r=useContext(DataProvider).settings,i=r.consoleActiveId,a=r.isConsoleOpen,s=r.position,l=function(e){return e===i},d=t.filter(function(e){return e.type===relevantType}),p=useState("300px"),c=p[0],u=p[1],m=useState("100%"),f=m[0],x=m[1],y=useCallback(function(e){27===e.keyCode&&o()},[]);return useEffect(function(){return window.addEventListener("keydown",y),function(){window.removeEventListener("keydown",y)}},[y]),_jsx(_Fragment,{children:a&&_jsx(_Fragment,{children:t.some(function(e){return e.type===relevantType})&&_jsx(StyledWrapper,__assign({},{id:domIdWrapper},{bottom:String(s===PlacementPosition.Bottom)},{children:_jsx(Resizable,__assign({onResizeStop:function(e,t,o,r){var i=Number(c.replace("px",""))+r.height;i<125?n({}):(u("".concat(i,"px")),x("100%"))},style:{display:"flex",flexDirection:"column"},minHeight:"75px",maxHeight:"950px",defaultSize:{width:f,height:c}},{children:_jsx(StyledResizable,{children:d.some(function(e){return e.uniqueId===i})?_jsxs("div",__assign({style:{flex:"1 1 auto",display:"flex",flexDirection:"column"}},{children:[_jsxs("div",__assign({style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},{children:[_jsx(StyledTabs,{children:d.map(function(e){var t=e.uniqueId,o=e.title;return _jsx(StyledTab,__assign({},{key:t,variant:"caption",onClick:function(){return n({id:t})},activated:l(t).toString()},{children:o||t}))})}),_jsx(Tooltip,__assign({},{title:"Close console section"},{children:_jsx(StyledCloseIcon,__assign({},{onClick:function(){return n({})}}))}))]})),_jsx(StyledStatusConsole,__assign({},{id:domId}))]})):_jsxs(StyledEmptyWrapper,{children:[_jsx(AppsOutageIcon,{}),_jsx(Typography,__assign({},{variant:"caption",color:"textSecondary"},{children:"Seems no consoles available. Select one from above"}))]})})}))}))})})}